# 避難所レイアウト検討ツール

避難所の運営訓練や検討に使用するための、Webベースのレイアウトシミュレーションツールです。
施設の図面画像を読み込み、その上に居住区画や受付などのパーツを配置して、避難所のレイアウトを検討することができます。

## 機能

* **施設図面の読み込み**: 背景として施設（体育館や教室など）の画像を読み込めます。
* **縮尺設定**: 図面上の2点をクリックし、実際の距離（メートル）を入力することで、正しい縮尺で区画を配置できます。
* **区画の配置**:
  * 居住スペース、受付、更衣室などのプリセット区画をドラッグ＆ドロップで配置。
  * 移動、回転、リサイズが可能。
  * 任意のサイズ・色の「カスタム区画」を作成して配置可能。
* **操作性**:
  * マウスドラッグによるキャンバスの移動（パン）。
  * マウスホイールまたはボタンによる拡大・縮小（ズーム）。
  * マウスホイールまたはボタンによる拡大・縮小（ズーム）。
  * 区画の個別削除機能。
* **区画のサイズ変更制御**:
  * デフォルトの区画はサイズ固定で、誤操作を防止。
  * カスタム区画は自由にリサイズ可能。
* **文字列ブロックの配置**:
  * 説明書き用のテキストを自由に配置可能。
  * フォントサイズの変更、内容の編集が可能。
* **データ保存**:
  * 配置した区画情報、作成したカスタム区画、設定した縮尺はブラウザに自動保存されます（LocalStorage）。
  * 背景画像も保存されます（IndexedDBを使用）。
  * 次回起動時に前回の状態から再開可能です。
* **画像出力**: 作成したレイアウトを画像ファイル（PNG）としてダウンロードできます。

## 技術スタック

* **Frontend Framework**: React + Vite
* **Canvas Library**: Konva.js (react-konva)
* **Storage**:
  * LocalStorage (軽量ステート)
  * IndexedDB (背景画像データ - `idb-keyval`使用)
* **Styling**: CSS Modules / Vanilla CSS

## 開発・実行方法

### 必要要件

* Node.js (v16以上推奨)

### セットアップ

```bash
# 依存関係のインストール
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスしてください。

### ビルド

```bash
npm run build
```

`dist` フォルダに静的ファイルが生成されます。

## 作者

スマートインプリメント 芝直之

## 著作権

Copyright (c) 2026 Smart Implement Naoyuki Shiba

## ライセンス

[MIT License](LICENSE)
